---
sidebar_position: 5
---
import { Mafs, Coordinates, Plot, Line, Circle, Theme, useMovablePoint, useStopwatch, vec, Vector, LaTeX, Polygon, Transform } from "mafs";
import MathEquation from "@site/src/components/Math";
import { useState } from "react";
import range from "lodash/range";
import { lineLabel } from "@site/src/utilities/lines";
import { gamma } from "mathjs";

# Integration

Integration is the process of finding the integral of a function. It is the reverse process of differentiation, and is used to find the area under a curve, the volume of a solid, and many other quantities.

## Area Under a Curve through Accumulation of Infinitesimal Areas

Imagine a curve like this one:

<Mafs
    viewBox={{
        x: [-1, 6],
        y: [-1, 6]
    }}
>
    <Coordinates.Cartesian/>
    <Plot.OfX
        y={(x) => x * (5 - x)}
    />
</Mafs>

This is a curve defined by the function $v(x) = x(5 - x)$.
Let this be the velocity of a vehicle at time $t$ (imagine it as a reading on the speedometer).

From differentiation we know that the derivative of the displacement function $s(t)$ is the velocity function $v(t)$.
In other words, $\frac{ds}{dt}(t) = v(t)$.

If we want to find the displacement of the vehicle at time $t$, we need to find a function $s(t)$ whose derivative is $v(t)$.
This is known as the antiderivative of $v(t)$.

A visual representation of this is the area under the curve of $v(t)$ from $0$ to $t$.
Since you can't just find the area (for now), you can approximate it by finding the area of rectangles.

A visualization is shown below:

{(() => {
    const ub = useMovablePoint([3, 0], {
        constrain: ([x, y]) => [Math.min(Math.max(x, 0), 5), 0]
    });
    const [n, setN] = useState(10);
    return (
        <div className="card">
            <div className="card__header">
                <h2>Area Under a Curve</h2>
            </div>
            <div className="card__body">
                <Mafs
                    viewBox={{
                        x: [-1, 6],
                        y: [-1, 6]
                    }}
                >
                    <Coordinates.Cartesian />
                    {ub.element}
                    <RiemannApproximation
                        f={(x) => x * (5 - x)}
                        lb={0}
                        ub={ub.point[0]}
                        n={n}
                    />
                </Mafs>
                {/* Slider */}
                <input
                    type="range"
                    min={1}
                    max={100}
                    value={n}
                    onChange={(e) => setN(parseInt(e.target.value))}
                    style={{ width: "100%" }}
                />
                <p>Number of rectangles: {n}</p>
            </div>
        </div>
    )
})()}

For each rectangle at time $t_i$, the width is $\Delta t$ and the height is $v(t_i)$. Hence, the area of the rectangle is $v(t_i) \Delta t$.
The total area is the sum of the areas of all the rectangles:

$$
\begin{equation}
\text{Area} = \sum_{i} v(t_i) \Delta t
\end{equation}
$$

Because $\Delta t \to 0$, the sum becomes a "continuous sum". This is what we call an integral:

$$
\begin{equation}
\text{Area} = \int_{0}^{T_1} v(t) dt
\end{equation}
$$

### Accumulation of Areas and the Fundamental Theorem of Calculus

Now, let's consider how to actually compute the area. Recall that the area of the velocity curve is equivalent to the displacement of the vehicle.

In other words:

$$
\begin{equation}
s(T_1) = \int_{0}^{T_1} v(t) dt
\end{equation}
$$

Additionally, recall that to find the slope of a function, we took an infinitesimal change in $x$ and found the change in $y$.
We can apply the same principle here: if we increment $t$, then we can calculate the change in the area.

{(() => {
    const T = 3;
    const dT = 0.3;
    const f = (x) => x * (5 - x);
    const boundedFunction = (x) => x > 3 ? 0 : f(x);
    return (
        <Mafs
            viewBox={{
                x: [-1, 6],
                y: [-1, 6]
            }}
        >
            <Coordinates.Cartesian/>
            <Plot.OfX
                y={f}
            />
            <Plot.Inequality
                y={{
                    "<=": boundedFunction,
                    ">": (x) => 0
                }}
            />
            <Polygon
                points={[
                    [T, 0],
                    [T, f(T)],
                    [T + dT, f(T)],
                    [T + dT, 0]
                ]}
                color={Theme.green}
                fillOpacity={0.5}
            />
        </Mafs>
    )
})()}

At time $T_1$, if we increment $t$ by $\Delta t$, then the area will be added by another rectangle, as shown above in green.
The width of the rectangle is $\Delta t$ and the height is $v(T_1)$.
Therefore:

$$
\begin{equation}
\Delta s = v(T_1) \Delta t
\end{equation}
$$

And if we rearrange:

$$
\begin{equation}
\frac{\Delta s}{\Delta t} = v(t)
\end{equation}
$$

And as $\Delta t \to 0$:

$$
\begin{equation}
\frac{ds}{dt} = v(t)
\end{equation}
$$

We have derived something known as the fundamental theorem of calculus:

<Boxed>
$$
\begin{align}
    \frac{ds}{dt} &= v(t) \\
    s(T_1) &= \int_{0}^{T_1} v(t) dt
\end{align}
$$
</Boxed>

## The Antiderivative

As shown above, the fundamental theorem of calculus states that the antiderivative of a function is the area under the curve of the function.

To find the antiderivative of a function, we take what we know about differentiation and work backwards.

For example, consider the antiderivative of $x^n$.
Recall that the derivative of $x^a$ is $ax^{a - 1}$.
To get rid of the coefficient, simply divide by $a$; so the derivative of $x^a/a$ is $x^{a - 1}$.

If we posit $x^n = x^{a - 1}$, then $a - 1 = n$ and $a = n + 1$.

Therefore, the antiderivative of $x^n$ is $x^{n + 1}/(n + 1)$.

### Antiderivative Notation

The antiderivative of a function $f(x)$ is denoted as $\int f(x) dx$. When we took the antiderivative of $x^n$, we can write it as:

$$
\begin{equation}
\int x^n dx = \frac{x^{n + 1}}{n + 1}
\end{equation}
$$

**HOWEVER**, we are missing something. Let's say $n = 4$. Then the antiderivative of $x^4$ is $x^5/5$.

Recall that the antiderivative is the function whose derivative is the original function.

Since the derivative of $x^5/5$ is $5x^4$, it is the antiderivative of $x^4$.
However, the derivative of $x^5/5 + 1$ is $5x^4$ as well, as well as the derivative of $x^5/5 + 2$, and so on, since the derivative of a constant is $0$.

Visually, this looks like moving the antiderivative up and down the $y$-axis:

{(() => {
    const f = (x) => x ** 4;
    const F = (x) => x ** 5 / 5;
    const offset = useMovablePoint([0, 0], {
        constrain: ([x, y]) => [0, y]
    });
    return (
        <Mafs
            viewBox={{
                x: [-1, 6],
                y: [-1, 6]
            }}
        >
            <Coordinates.Cartesian/>
            <Plot.OfX
                y={(x) => F(x) + offset.point[1]}
            />
            {offset.element}
        </Mafs>
    )
})()}

We can denote this constant as $C$. Therefore, we can revise our antiderivative as:

$$
\begin{equation}
\int x^n dx = \frac{x^{n + 1}}{n + 1} + C
\end{equation}
$$

We have now found the antiderivative of $x^n$, known as the power rule of integration.

## Definite Integrals

Now let's connect the antiderivative to the area under the curve. Using what we know so far:

$$
\begin{equation}
\int_{0}^{T_1} v(t) dt = s(T_1) + C \label{eq:definite_integrals-antiderivative}
\end{equation}
$$

However, what do we set $C$ as? It can't be any constant, since the area under the curve is a specific value.
To solve this conundrum, we introduce the concept of a definite integral. Let's say we want to find the area under the curve of $v(t)$ from $0$ to $0$.
This is obviously $0$, so, plugging this into Equation $\ref{eq:definite_integrals-antiderivative}$:

$$
\begin{equation}
\int_{0}^{0} v(t) dt = 0 = s(0) + C
\end{equation}
$$

Therefore, $C = -s(0)$. This is the basis of the definite integral:

$$
\begin{equation}
\int_{0}^{T_1} v(t) dt = s(T_1) - s(0)
\end{equation}
$$

We can also replace $0$ with any arbitrary constant. For example, if we want to find the area under the curve of $v(t)$ from $T_0$ to $T_1$:

$$
\begin{equation}
\int_{T_0}^{T_1} v(t) dt = s(T_1) - s(T_0)
\end{equation}
$$

Notice that the area under the curve is derived solely from the endpoints $T_0$ and $T_1$, and nothing in between.

## Proof of the Fundamental Theorem of Calculus

The fundamental theorem of calculus states two things:

1. $\displaystyle \frac{d}{dx} \int_{0}^{x} f(t) dt = f(x)$
2. $\displaystyle \int_{a}^{b} f(x) dx = F(b) - F(a)$

While we have shown it intuitively, we can also prove it rigorously.
Both are equally important, as the intuitive visualization helps people understand the concept and helps the concept stick in their minds, while the rigorous proof ensures the validity and correctness of the concept.

### Proof of the First Part

First, let $f: \mathbb{R} \to \mathbb{R}$ be a function continuous on $[a, b]$.

Let $F(x) = \int_{a}^{x} f(t) dt$ be the accumulation function of $f(x)$ where $a \leq x \leq b$.

export function FTOCProof1({ showDx = false, showMVT = false }) {
    const f = (x) => Math.sin(x / 2) + 4;
    const F = (x) => -2 * Math.cos(x / 2) + 4 * x;
    const a = 2, b = 8;
    const x = useMovablePoint([a + 2, 0], {
        constrain: ([x, y]) => [Math.min(Math.max(x, a), b), 0],
        color: Theme.green
    });
    const dx = 1.5;
    const x2 = x.point[0] + dx;
    const mvtHeight = (F(x2) - F(x.point[0])) / dx;
    return (
        <Mafs
            viewBox={{
                x: [-1, 11],
                y: [-1, 6]
            }}
        >
            <Coordinates.Cartesian
                xAxis={{
                    lines: false,
                    labels: () => ""
                }}
                yAxis={{
                    lines: false,
                    labels: () => ""
                }}
            />
            <Plot.OfX
                y={f}
            />
            {/* a */}
            <Line.Segment
                point1={[a, 0]}
                point2={[a, f(a)]}
            />
            <LaTeX
                at={[a, -0.5]}
                tex="a"
            />
            {/* b */}
            <Line.Segment
                point1={[b, 0]}
                point2={[b, f(b)]}
            />
            <LaTeX
                at={[b, -0.5]}
                tex="b"
            />
            {/* x */}
            {x.element}
            <Line.Segment
                point1={x.point}
                point2={[x.point[0], f(x.point[0])]}
                color={Theme.green}
            />
            <LaTeX
                at={[x.point[0], -0.5]}
                tex="x"
            />
            {/* dx */}
            {showDx && (
                <>
                    <Line.Segment
                        point1={[x2, 0]}
                        point2={[x2, f(x2)]}
                        color={Theme.green}
                    />
                    <LaTeX
                        at={[x2, -0.5]}
                        tex="x + \Delta x"
                    />
                    <Plot.Inequality
                        y={{
                            "<=": (value) => (value >= x.point[0] && value <= x2) ? f(value) : 0,
                            ">": (x) => 0
                        }}
                        fill={Theme.green}
                        fillOpacity={0.5}
                        xDomain={[x.point[0], x2]}
                    />
                    {showMVT && (
                        <>
                            <Polygon
                                points={[
                                    [x.point[0], 0],
                                    [x.point[0], mvtHeight],
                                    [x2, mvtHeight],
                                    [x2, 0]
                                ]}
                                color={Theme.green}
                                fillOpacity={0.5}
                            />
                        </>
                    )}
                </>
            )}
        </Mafs>
    )
}

<FTOCProof1 />

Using the definition of the derivative, the derivative of $F(x)$ is:

$$
\begin{align}
\frac{d}{dx} F(x) &= \lim_{\Delta x \to 0} \frac{F(x + \Delta x) - F(x)}{h} \\
&= \lim_{\Delta x \to 0} \frac{\int_{a}^{x + \Delta x} f(t) dt - \int_{a}^{x} f(t) dt}{\Delta x}
\end{align}
$$

<FTOCProof1 showDx={true} />

As shown in the graph, the numerator can be represented as the area under the curve of $f(t)$ from $x$ to $x + \Delta x$. Therefore:

$$
\begin{align}
\frac{d}{dx} F(x) &= \lim_{\Delta x \to 0} \frac{1}{\Delta x} \int_{x}^{x + \Delta x} f(t) dt \\
\end{align}
$$

The Mean-Value Theorem states:

$$
\begin{equation}
\exists c \in [x, x + \Delta x] \text{ such that } f(c)\Delta x = \frac{1}{\Delta x} \int_{x}^{x + \Delta x} f(t) dt
\end{equation}
$$

Which is a fancy way of saying that there is some rectangle whose area is exactly the area under the segment of the curve.
It's called the Mean-Value Theorem because the right-hand side is the average value of the function over the interval $[x, x + \Delta x]$.

<FTOCProof1 showDx={true} showMVT={true} />

Therefore:

$$
\begin{equation}
\frac{d}{dx} F(x) = \lim_{\Delta x \to 0} f(c)
\end{equation}
$$

Since $x \leq c \leq x + \Delta x$, as $\Delta x \to 0 \Rightarrow c \to x$.

Therefore:

$$
\begin{equation}
\frac{d}{dx} F(x) = f(x)
\end{equation}
$$

## Average Value of a Function

Usually, when we talk about the average of a set of numbers, we think of a discrete set of values, like the average of $1, 2, 3, 4, 5$.
Calculus is all about extending discrete concepts to continuous ones, so we can also find the average value of a continuous function.

Let's once again consider the velocity function $v(t)$, and split it into $n$ intervals of width $\Delta t$.

{(() => {
    const n = 5;
    const f = (x) => x * (5 - x);
    return (
        <Mafs
            viewBox={{
                x: [-1, 6],
                y: [-1, 6]
            }}
        >
            <Coordinates.Cartesian />
            <RiemannApproximation
                f={(x) => x * (5 - x)}
                lb={0}
                ub={3}
                n={n}
            />
        </Mafs>
    )
})()}

The average value of a set of numbers is the sum of the numbers divided by the count:

$$
\begin{equation}
\text{Average} = \frac{\sum_{i} v(t_i)}{n}
\end{equation}
$$

Let's consider what $n$ is in a discrete context. It is the number of intervals ($\Delta t$) we split the function into.
Therefore, it can be represented as the length of the interval divided by $\Delta t$:

$$
\begin{equation}
n = \frac{T_1 - T_0}{\Delta t}
\end{equation}
$$

Therefore, the average value of a function is:

$$
\begin{equation}
\text{Average} = \frac{\sum_{i} v(t_i)}{\frac{T_1 - T_0}{\Delta t}} = \frac{\sum_{i} v(t_i) \Delta t}{T_1 - T_0}
\end{equation}
$$

The numerator should look familiar: it is the area under the curve of $v(t)$ from $T_0$ to $T_1$.

Therefore, the average value of a function is:

$$
\begin{equation}
\text{Average} = \frac{\int_{T_0}^{T_1} v(t) dt}{T_1 - T_0} = \frac{s(T_1) - s(T_0)}{T_1 - T_0}
\end{equation}
$$

## Riemann Sums

When we approximated the area under the curve of $v(t)$, we used rectangles. Now we will go into more detail about this process.

What we did is known as a Riemann sum. Let's once again consider the velocity function $v(t)$:

{(() => {
    const n = 5;
    const f = (x) => x * (5 - x);
    const lb = 0, ub = 3, dt = (ub - lb) / n;
    /** @type {"left" | "right" | "middle" | "trapezoidal"} */
    const [type, setType] = useState("left");
    return (
        <>
            <Mafs
                viewBox={{
                    x: [-1, 6],
                    y: [-1, 6]
                }}
            >
                <Coordinates.Cartesian />
                <RiemannApproximation
                    f={(x) => x * (5 - x)}
                    lb={lb}
                    ub={ub}
                    n={n}
                    type={type}
                />
                {range(lb, ub, dt).map((t, i) => (
                    <>
                        <Vector
                            tail={[t, 0]}
                            tip={[t + dt, 0]}
                            color={Theme.green}
                        />
                        <LaTeX
                            at={[t + dt, -0.5]}
                            tex={`t_${i + 1}`}
                        />
                    </>
                ))}
            </Mafs>
            <select
                value={type}
                onChange={(e) => setType(e.target.value)}
            >
                <option value="left">Left</option>
                <option value="right">Right</option>
                <option value="middle">Middle</option>
                <option value="trapezoidal">Trapezoidal</option>
            </select>
        </>
    )
})()}

Riemann sums can be categorized into different types:

- The **left Riemann sum** uses the left endpoint of each interval as the height of the rectangle.
- The **right Riemann sum** uses the right endpoint of each interval as the height of the rectangle.
- The **midpoint Riemann sum** uses the midpoint of each interval as the height of the rectangle.
- The **trapezoidal Riemann sum** uses a trapezoid instead of a rectangle.

The general procedure for a Riemann sum is as follows:

1. **Identify $\Delta t$**. As we know, the area of each rectangle is $v(t_i) \Delta t$. In the interval $[T_0, T_1]$, since there are $n$ rectangles, the width of each rectangle is $\Delta t = \frac{T_1 - T_0}{n}$.
2. **Identify $t_i$**. As shown in the graph, $t_i$ can be represented as $T_0$ plus all the arrows pointing to the right. Therefore, $t_i = T_0 + i \Delta t$.
3. **Using the above values, identify the area of each $i$th rectangle**. The area of each rectangle can be represented as $v(T_0 + i \Delta t) \Delta t$.
4. **Identify $i$ and sum all the areas**. The total area is the sum of all the areas of the rectangles:

    $$
    \begin{equation}
    \text{Area} = \sum_{i} v(T_0 + i \Delta t) \Delta t = \Delta t \sum_{i} v(T_0 + i \Delta t) \label{eq:riemann_sums-total-area}
    \end{equation}
    $$

    Identifying the bounds of the sum depends on the type of Riemann sum used:
    - For a left Riemann sum, start at $i = 0$ and end at $i = n - 1$.
    - For a right Riemann sum, start at $i = 1$ and end at $i = n$.
    - For a midpoint Riemann sum, start at $i = 0.5$ and end at $i = n - 0.5$.

    For example, the left Riemann sum can be represented as:

    $$
    \begin{equation}
    \text{Area} = \sum_{i = 0}^{n - 1} v(T_0 + i \Delta t) \Delta t = \Delta t \sum_{i = 0}^{n - 1} v(T_0 + i \Delta t)
    \end{equation}
    $$

### Trapezoidal Rule

The trapezoidal Riemann sum is a more accurate approximation of the area under the curve than the rectangular Riemann sums.

Recall that the area of a trapezoid is $\frac{1}{2} h (b_1 + b_2)$, where $h$ is the height and $b_1$ and $b_2$ are the bases.

In this case, if we split the area into trapezoids, $h$ is $\Delta t$ and $b_1$ and $b_2$ are $v(t_i)$ and $v(t_{i + 1})$ respectively.
Therefore, the area of each trapezoid is $\frac{1}{2} \Delta t (v(t_i) + v(t_{i + 1}))$.

The total area is the sum of all the areas of the trapezoids:

$$
\begin{equation}
\text{Area} = \sum_{i = 0}^{n - 1} \frac{1}{2} \Delta t (v(T_0 + i \Delta t) + v(T_0 + (i + 1) \Delta t)) = \frac{\Delta t}{2} \sum_{i = 0}^{n - 1} v(T_0 + i \Delta t) + v(T_0 + (i + 1) \Delta t)
\end{equation}
$$

If we let $n \to \infty$, then we don't need to use the trapezoidal rule, as the Riemann sum will converge to the actual area under the curve no matter what is used.

### Integral as a Limit of Riemann Sums

If we let $n \to \infty$, then the Riemann sum will converge to the actual area under the curve.

Therefore, we can generalize the area under the curve as the limit of $\ref{eq:riemann_sums-total-area}$ as $n \to \infty$:

$$
\int_{T_0}^{T_1} v(t) dt = \lim_{n \to \infty} \sum_{i = 0}^{n - 1} v(T_0 + i \Delta t) \Delta t
$$

:::info Proof using Epsilon-Delta

Firstly, the above can be formalized into a theorem:

> Let $f: \mathbb{R} \to \mathbb{R}$ be a function continuous on $[a, b]$. The limit of the Riemann sum of $f$ over $[a, b]$ as the mesh of the partition approaches $0$ is equivalent to the integral of $f$ over $[a, b]$.

The proof of this theorem is quite complex, but it can be done using the $\varepsilon$-$\delta$ definition of a limit.

1. **Definitions**
    - **Partition**: A partition $P$ of $[a, b]$ is a finite set of points $x_0, x_1, \cdots, x_n$ such that $a = x_0 < x_1 < \cdots < x_n = b$.
    - **Mesh**: The mesh of a partition $P$ is the maximum length of the subintervals $[x_{i - 1}, x_i]$, denoted as $\|P\| = \max_{i} (x_i - x_{i - 1}) \text{ for } i = 1, 2, \cdots, n$.
    - **Riemann Sum**: For a given partition $P$ and a set of points $t_i \in [x_{i - 1}, x_i]$, the Riemann sum of $f$ over $P$ is:

            $$
            R(f, P, \{t_i\}) = \sum f(t_i) (x_i - x_{i - 1})
            $$

    These definitions are a formalization of the Riemann sum we have been discussing. What it's saying is that you can choose any intervals inside $[a, b]$, then choose any point as the height of the rectangle, and the sum of all the areas of the rectangles will be the Riemann sum.
    This definition helps because it is independent of the type of the Riemann sum.
2. **Continuity**
    - Since $f$ is continuous on $[a, b]$, it is **uniformly continuous** on $[a, b]$. Hence, for any $\varepsilon > 0$, there exists a $\delta > 0$ such that for any $x, y \in [a, b]$ where $|x - y| < \delta$, $|f(x) - f(y)| < \varepsilon$.
3. **Convergence**
    - Let $\varepsilon > 0$ be given. Since $f$ is uniformly continuous on $[a, b]$, choose $\delta > 0$ such that for any $x, y \in [a, b]$ where $|x - y| < \delta$, $|f(x) - f(y)| < \frac{\varepsilon}{b - a}$.
    - Next, let $P$ be a partition of $[a, b]$ with mesh $\|P\| < \delta$. This is possible because the mesh of the partition can be made arbitrarily small.
    - For each subinterval $[x_{i - 1}, x_i]$ of the partition, choose a point $t_i \in [x_{i - 1}, x_i]$.
    - The difference between the Riemann sum and the definite integral can be evaluated as follows:

            $$
            \begin{align}
            \left|R(f, P, t) - \int_{a}^{b} f(x)dx \right| &= \left|\sum f(t_i) (x_i - x_{i - 1}) - \int_{a}^{b} f(x)dx \right| \\
            &= \left|\sum f(t_i) (x_i - x_{i - 1}) - \sum f(x) (x_i - x_{i - 1}) \right| \\
            &= \left|\sum (f(t_i) - f(x)) (x_i - x_{i - 1}) \right| \\
            &\leq \sum |f(t_i) - f(x)| (x_i - x_{i - 1}) \\
            \end{align}
            $$

    The proof uses the Mean Value Theorem (MVT). For a continuous function $f$ on $[a, b]$, there exists a point $x \in [x_{i - 1}, x_i]$ such that $\int_{x_{i - 1}}^{x_i} f(x)dx = f(x) (x_i - x_{i - 1})$.
    Next, since the width of each interval $x_i - x_{i - 1}$ is less than $\delta$, $c_i - x < \delta$, and by uniform continuity, $|f(c_i) - f(x)| < \frac{\varepsilon}{b - a}$. Therefore:

            $$
            \begin{align}
            \left|R(f, P, t) - \int_{a}^{b} f(x)dx \right| &\leq \sum |f(t_i) - f(x)| (x_i - x_{i - 1}) \\
            &\leq \sum \frac{\varepsilon}{b - a} (x_i - x_{i - 1}) \\
            &= \frac{\varepsilon}{b - a} \sum (x_i - x_{i - 1}) \\
            &= \varepsilon
            \end{align}
            $$

    As such, in conclusion, for any $\varepsilon > 0$, there exists a $\delta > 0$ such that for any partition $P$ with mesh $\|P\| < \delta$, $|R(f, P, t) - \int_{a}^{b} f(x)dx| < \varepsilon$. This is the definition of a limit, and hence the Riemann sum converges to the integral.

    Hence:

    $$
    \begin{equation}
    \int_{a}^{b} f(x)dx = \lim_{\|P\| \to 0} R(f, P, t)
    \end{equation}
    $$

:::

For example, consider this integral:

$$
\begin{equation}
\int_{0}^{3} x(5 - x) dx
\end{equation}
$$

Let's go through our steps:

1. **Identify $\Delta t$**. Since the interval is $[0, 3]$, $\Delta t = \frac{3 - 0}{n} = \frac{3}{n}$.
2. **Identify $t_i$**. $t_i = 0 + i \Delta t = \frac{3i}{n}$.
3. **Identify the area of each $i$th rectangle**. The area of each rectangle is $v(t_i) \Delta t = \frac{3i}{n} \left(5 - \frac{3i}{n}\right) \frac{3}{n} = \frac{9}{n^3} i(5n - 3i) $.

Therefore, the Riemann sum is:

$$
\begin{align}
\text{Area} &= \sum_{i = 0}^{n - 1} \frac{9}{n^3} i(5n - 3i) \\
&= \frac{9}{n^3} \sum_{i = 0}^{n - 1} i(5n - 3i)
\end{align}
$$

And the area under the curve is:

$$
\begin{equation}
\int_{0}^{3} x(5 - x) dx = \lim_{n \to \infty} \frac{9}{n^3} \sum_{i = 0}^{n - 1} i(5n - 3i)
\end{equation}
$$

## Accumulation Functions: Functions Defined by Integrals

A function can be defined by an integral. For example, consider the following function:

$$
\begin{equation}
f(x) = \int_{-4}^{x} t^2 dt
\end{equation}
$$

This is known as an accumulation function. The reason it's called an accumulation function is because of what we've discussed above; treating integrals as an accumulation of areas.

The derivative of an accumulation function can be derived using the fundamental theorem of calculus:

$$
\begin{align}
\frac{df}{dx}(x) &= \frac{d}{dx} \int_{-4}^{x} t^2 dt \\
&= x^2
\end{align}
$$

Sometimes the upper bound of the integral isn't just $x$, but a function of $x$. For example:

$$
\begin{equation}
f(x) = \int_{-4}^{\sin(x)} t^2 dt
\end{equation}
$$

The derivative of this function can be found using the chain rule. Set another function $u(x)$ as:

$$
\begin{align}
u(x) &= \int_{-4}^{x} t^2 dt \\
\frac{du}{dx}(x) &= x^2
\end{align}
$$

And set $v(x) = \sin(x)$:

$$
\begin{align}
v(x) &= \sin(x) \\
\frac{dv}{dx}(x) &= \cos(x)
\end{align}
$$

Therefore, the derivative of $f(x)$ is:

$$
\begin{align}
\frac{df}{dx}(x) &= \frac{d}{dx} u(v(x)) \\
&= \frac{du}{dv} \frac{dv}{dx} \\
&= v^2 \cos(x) \\
&= \sin^2(x) \cos(x)
\end{align}
$$

Generalizing this, the derivative of an accumulation function with a variable upper bound is:

$$
\begin{equation}
\frac{d}{dx} \int_{a}^{g(x)} f(t) dt = \frac{dg}{dx}(x) f(g(x))
\end{equation}
$$

Many functions are defined using integrals because they are easier to work with, and some cannot be expressed in terms of elementary functions.

A common example is the error function:

$$
\begin{equation}
\text{erf}(x) = \frac{2}{\sqrt{\pi}} \int_{0}^{x} e^{-t^2} dt
\end{equation}
$$

The error function is used in statistics and probability theory, and is used to calculate the probability of a random variable falling within a certain range.

Another common example is the gamma function:

$$
\begin{equation}
\Gamma(x) = \int_{0}^{\infty} t^{x - 1} e^{-t} dt
\end{equation}
$$

<Mafs>
    <Coordinates.Cartesian/>
    <Plot.OfX
        y={gamma}
    />
</Mafs>

The gamma function is a generalization of the factorial function, and is used in many areas of mathematics.

### Behavior of Accumulation Functions

The behavior of accumulation functions can be quite complex. For example, consider the following function:

$$
f(x) = -x(x - 6)
$$

<Mafs
    viewBox={{
        x: [-1, 9],
        y: [-1, 9]
    }}
>
    <Coordinates.Cartesian/>
    <Plot.OfX
        y={(x) => -x * (x - 6)}
    />
</Mafs>

And let $g(x)$ be the accumulation function of $f(x)$:

$$
g(x) = \int_{0}^{x} f(t) dt
$$

Because of the fundamental theorem of calculus, the derivative of $g(x)$ is $f(x)$. Using this, we can use $f$ to derive the behavior of $g$.

For example, at $x = 0, x = 6$, $f(x) = 0$, so those are the critical points of $g(x)$.
At $x \in (0, 6)$, $f(x) > 0$, so $g(x)$ is increasing.

At $x \in (6, \infty)$, $f(x) < 0$, so $g(x)$ is decreasing.

## Properties of Definite Integrals

Since integrals are the accumulation of areas; the continuous analog of the sum, they have many properties that are similar to sums.

### Signs

When the area is above the $x$-axis, it is positive. When the area is below the $x$-axis, it is negative.

If the upper bound is less than the lower bound, you sort of "go backwards" and the entire integral is negated.

As such,

$$
\int_{a}^{b} f(x) dx = -\int_{b}^{a} f(x) dx
$$

This can also be shown through the Riemann sum. Consider the Riemann sum for each integral:

$$
\begin{align}
\int_{a}^{b} f(x) dx &= \lim_{n \to \infty} \sum_{i = 0}^{n - 1} f(a + i \Delta x) \Delta x \\
\int_{b}^{a} f(x) dx &= \lim_{n \to \infty} \sum_{i = 0}^{n - 1} f(b + i \Delta x) \Delta x
\end{align}
$$

Let's think about what $\Delta x$ is. Recall that $\Delta x = \frac{\text{Upper Bound} - \text{Lower Bound}}{n}$.

Hence, for the first integral, $\Delta x = \frac{b - a}{n}$, and for the second integral, $\Delta x = \frac{a - b}{n}$.

Since $a - b = -(b - a)$, the Riemann sum for the second integral is the negation of the Riemann sum for the first integral.

Another way to show this is through the fundamental theorem of calculus. Recall that for a function $F(x)$ with derivative $f(x)$, the integral of $f(x)$ from $a$ to $b$ is $F(b) - F(a)$.

If we flip it:

$$
\int_{b}^{a} f(x) dx = F(a) - F(b) = -(F(b) - F(a)) = -\int_{a}^{b} f(x) dx
$$

One application of this is to evaluate accumulation functions where the function parameter is on the lower bound. For example:

$$
f(x) = \int_{x}^{3} t(5 - t) dt
$$

This can be rewritten as:

$$
f(x) = -\int_{3}^{x} t(5 - t) dt
$$

### Linearity

Let's think about the integral of a sum of functions:

$$
\int_{a}^{b} (f(x) + g(x)) dx
$$

Where $f(x) = x(5 - x)$ and $g(x) = x + sin(x)$.

The graph for $f(x)$ and $f(x) + g(x)$ is shown below:

<Mafs
    viewBox={{
        x: [-1, 10],
        y: [-1, 10]
    }}
>
    <Coordinates.Cartesian/>
    <Plot.OfX
        y={(x) => x * (5 - x)}
    />
    <Plot.OfX
        y={(x) => x * (5 - x) + Math.sin(x) + x}
    />
</Mafs>

If we once again consider the Riemann sum, we can split the integral into separate rectangles:

<Mafs
    viewBox={{
        x: [-1, 10],
        y: [-1, 10]
    }}
>
    <Coordinates.Cartesian/>
    <RiemannApproximation
        f={(x) => x * (5 - x) + Math.sin(x) + x}
        lb={0}
        ub={3}
        n={5}
    />
    <RiemannApproximation
        f={(x) => x * (5 - x)}
        lb={0}
        ub={3}
        n={5}
    />
</Mafs>

Notice how the rectangle for $f(x) + g(x)$ is the sum of the rectangles for $f(x)$ and $g(x)$. Therefore we can intuitively say that:

$$
\int_{a}^{b} (f(x) + g(x)) dx = \int_{a}^{b} f(x) dx + \int_{a}^{b} g(x) dx
$$

This is known as the linearity of integrals.

### Singular Points

The integral of a function at a singular point is $0$.

For example, consider the function $f(x) = \frac{1}{x}$:

<Mafs
    viewBox={{
        x: [-1, 10],
        y: [-1, 10]
    }}
>
    <Coordinates.Cartesian/>
    <Plot.OfX
        y={(x) => 1 / x}
    />
    <Line.Segment
        point1={[2, 0]}
        point2={[2, 1 / 2]}
        color={Theme.red}
    />
</Mafs>

The integral of $f(x)$ from $2$ to $2$ is $0$ because there's no width at all.

### Scaling

If you scale a function by a constant, then the integral is scaled by that constant.

Consider the function $f(x) = \sin(x)$, and $g(x) = \frac{5}{2}\sin(x)$:

<Mafs
    viewBox={{
        x: [-3, 3],
        y: [-3, 3]
    }}
>
    <Coordinates.Cartesian/>
    <Plot.OfX
        y={(x) => Math.sin(x)}
    />
    <Plot.OfX
        y={(x) => 2.5 * Math.sin(x)}
        color={Theme.blue}
    />
</Mafs>

Now let's consider the integral of $f(x)$ and $g(x)$ from $0$ to $\pi$:

<Mafs
    viewBox={{
        x: [-3, 3],
        y: [-3, 3]
    }}
>
    <Coordinates.Cartesian/>
    <RiemannApproximation
        f={(x) => Math.sin(x)}
        lb={0}
        ub={Math.PI}
        n={5}
    />
    <RiemannApproximation
        f={(x) => 2.5 * Math.sin(x)}
        lb={0}
        ub={Math.PI}
        n={5}
        color={Theme.blue}
    />
</Mafs>

Notice how, once again, the rectangle for $g(x)$ is scaled by $2.5$ compared to the rectangle for $f(x)$.

Therefore, we can say that:

$$
\int_{a}^{b} k f(x) dx = k \int_{a}^{b} f(x) dx
$$

### Adjacency

Consider a function $f(x) = \sqrt{x}$:

<Mafs
    viewBox={{
        x: [-1, 3],
        y: [-1, 3]
    }}
>
    <Coordinates.Cartesian/>
    <Plot.OfX
        y={(x) => Math.sqrt(x)}
    />
    <Plot.Inequality
        y={{
            "<=": (x) => (x > 0 && x < 1) ? Math.sqrt(x) : -50,
            ">": (x) => 0
        }}
        color={Theme.red}
    />
    <Plot.Inequality
        y={{
            "<=": (x) => (x > 1 && x < 4) ? Math.sqrt(x) : -50,
            ">": (x) => 0
        }}
        color={Theme.blue}
    />
</Mafs>

Notice how if you add the areas for $f(x)$ from $0$ to $1$ and $1$ to $4$, you get the area for $f(x)$ from $0$ to $4$.

Therefore, we can say that:

$$
\int_{a}^{b} f(x) dx = \int_{a}^{c} f(x) dx + \int_{c}^{b} f(x) dx
$$

Note that $c$ does not have to be in the interval $[a, b]$. A way to show this is through the fundamental theorem of calculus. Let $F(x)$ be the antiderivative of $f(x)$:

$$
\begin{align}
\int_{a}^{b} f(x) dx &= F(b) - F(a) \\
&= F(c) - F(a) + F(b) - F(c) \\
&= \int_{a}^{c} f(x) dx + \int_{c}^{b} f(x) dx
\end{align}
$$

Notice how this does not depend on the value of $c$.

### Example Problem: Input on Both Bounds

> Consider the following accumulation function:
>
> $$
> f(x) = \int_{x}^{x^2} t^2 \cos(t) dt
> $$
>
> Identify the derivative of $f(x)$.

Let's first rewrite the accumulation function using Adjacency.

$$
f(x) = \int_{x}^{x^2} t^2 \cos(t) dt = \int_{x}^{c} t^2 \cos(t) dt + \int_{c}^{x^2} t^2 \cos(t) dt
$$

Next, consider the first integral. $x$ is on the bottom, so we can flip the integral to move it to the top:

$$
\int_{x}^{c} t^2 \cos(t) dt = -\int_{c}^{x} t^2 \cos(t) dt
$$

Thus, the accumulation function can be rewritten as:

$$
f(x) = -\int_{c}^{x} t^2 \cos(t) dt + \int_{c}^{x^2} t^2 \cos(t) dt
$$

The derivative of $f(x)$ can be found using the fundamental theorem of calculus and the chain rule:

$$
\begin{align}
\frac{df}{dx}(x) &= -\frac{d}{dx} \int_{c}^{x} t^2 \cos(t) dt + \frac{d}{dx} \int_{c}^{x^2} t^2 \cos(t) dt \\
&= -x^2 \cos(x) + 2x(x^2 \cos(x^2)) \\
&= -x^2 \cos(x) + 2x^3 \cos(x^2)
\end{align}
$$

### Cheat Sheet of Properties

Here is a cheat sheet of the properties of definite integrals:

| Property | Formula |
|----------|---------|
| Signs | $\int_{a}^{b} f(x) dx = -\int_{b}^{a} f(x) dx$ |
| Linearity | $\int_{a}^{b} (f(x) + g(x)) dx = \int_{a}^{b} f(x) dx + \int_{a}^{b} g(x) dx$ |
| Singular Points | $\int_{a}^{a} f(x) dx = 0$ |
| Scaling | $\int_{a}^{b} k f(x) dx = k \int_{a}^{b} f(x) dx$ |
| Adjacency | $\int_{a}^{b} f(x) dx = \int_{a}^{c} f(x) dx + \int_{c}^{b} f(x) dx$ |

## Common Antiderivatives

Since the derivative of an antiderivative is the original function, we can use this to compute antiderivatives.

We've already gone over the intuition for many derivatives. Here are some common antiderivatives:

| Function | Antiderivative |
|----------|----------------|
| $x^n$ | $\frac{x^{n + 1}}{n + 1} + C$ |
| $\sin(x)$ | $-\cos(x) + C$ |
| $\cos(x)$ | $\sin(x) + C$ |
| $e^x$ | $e^x + C$ |
| $\frac{1}{x}$ | $\ln|x| + C$ |

## Reversing the Chain Rule

Sometimes, the antiderivative of a function is not immediately obvious. In such cases, substitution can be used.

The first type of substitution is the $u$-substitution, which is basically the chain rule in reverse. Consider the following integral:

$$
\int 2x \cos(x^2 + 3) dx
$$

Now, there's two ways to do this. The first way is to use the chain rule in reverse, and the second way is to use $u$-substitution.
$u$-substitution tends to be easier, but reverse chain rule lets you do it a lot faster.

### Reverse Chain Rule

Recall the chain rule:

$$
\frac{d}{dx} f(g(x)) = \frac{df}{dg} \frac{dg}{dx}
$$

We have a composite function $\cos(x^2 + 3)$, and the derivative of $x^2 + 3$ is $2x$. As such we have all the components of the chain rule:

$$
\overbrace{2x}^{dg/dx} \mathrlap{\underbrace{\phantom{\cos(x^2 + 3)}}_{df/dg}} \cos(\overbrace{x^2 + 3}^{g(x)}) = \frac{dg}{dx} \frac{df}{dg}
$$

In this case $\frac{df}{dg}$ is $\cos(g)$, so $f(g)$ is $\sin(g)$. By reversing the chain rule, the antiderivative is:

$$
\int 2x \cos(x^2 + 3) dx = f(g(x)) + C = \sin(x^2 + 3) + C
$$

### $u$-Substitution

We have a composite function $\cos(x^2 + 3)$, and the derivative of $x^2 + 3$ is $2x$. As such, we can let $u = x^2 + 3$:

$$
\begin{align}
u &= x^2 + 3 \\
\frac{du}{dx} &= 2x \\
du &= 2x dx \\
\end{align}
$$

Hence, the integral can be rewritten as:

$$
\int 2x \cos(x^2 + 3) dx = \int \cos(u) du = \sin(u) + C = \sin(x^2 + 3) + C
$$

### $u$-Substitution in Definite Integrals

$u$-substitution can also be used in definite integrals. Consider the following integral:

$$
\int_{0}^{\pi} \frac{4x}{\ln(x^2 + 5)} dx
$$

This can be solved by letting $u = x^2 + 5$ and $du = 2x dx$:

$$
\int_{0}^{\pi} \frac{4x}{x^2 + 5} dx = \int_{0}^{\pi} \frac{2}{\ln(u)} du
$$

**BUT WAIT!** We changed the function from $x$ to $u$, so we need to change the bounds as well.
The bounds are $x = 0$ and $x = \pi$, so when $x = 0$, $u = 5$, and when $x = \pi$, $u = \pi^2 + 5$.

Therefore the new bounds should be $5$ and $\pi^2 + 5$:

$$
\int_{0}^{\pi} \frac{4x}{x^2 + 5} dx = \int_{5}^{\pi^2 + 5} \frac{2}{\ln(u)} du
$$

## Integration by Long Division

Long division, a technique you may have learned in elementary school, can also be used in algebra.
The difference is that instead of dividing numbers, you are dividing polynomials.

For example, consider the following integral:

$$
\int \frac{x^2 + 3x + 2}{x + 1} dx
$$

The first step is to divide $x^2 + 3x + 2$ by $x + 1$.
Recall from elementary school that you find the largest multiple of the quotient in the highest place value.
Here, instead of the highest place value, you are looking at the highest degree term, $x^2$.

The largest multiple of $x$ in $x^2$ is $x$, so you multiply $x + 1$ by $x$ to get $x^2 + x$.
$$
\begin{array}{rl}
& x \\
x + 1 & \mathrlap{\mkern{-0.5em})} \overline{x^2 + 3x + 2} \\
& x^2 + x \\
& \overline{\phantom{x^2 + }2x + 2} \\
\end{array}
$$

You get a remainder of $2x + 2$. Repeat the process; find the largest multiple of $x$ in $2x$ - it's $2$.

$$
\begin{array}{rl}
& x + 2 \\
x + 1 & \mathrlap{\mkern{-0.5em})} \overline{x^2 + 3x + 2} \\
& x^2 + x \\
& \overline{\phantom{x^2 + }2x + 2} \\
& \phantom{x^2 + }2x + 2 \\
& \overline{\phantom{x^2 + 3x + }0} \\
\end{array}
$$

As such, the integral can be rewritten as:

$$
\int \frac{x^2 + 3x + 2}{x + 1} dx = \int (x + 2) dx = \frac{x^2}{2} + 2x + C
$$

### Example Problem: Integration by Long Division

> Evaluate the following integral:
>
> $$
> \int \frac{x - 5}{-2x + 2} dx
> $$

Once again, we can use long division to divide $x - 5$ by $-2x + 2$.

The highest-degree term in $x - 5$ is $x$. Hence to get $x$, multiply $-2x + 2$ by $-\frac{1}{2}$:

$$
\begin{array}{rl}
& \mkern{-0.8em}-\frac{1}{2} \\
-2x + 2 & \mathrlap{\mkern{-0.5em})} \overline{x - 5} \\
& x - 1 \\
& \overline{\phantom{x } - 4} \\
\end{array}
$$

This time we have a remainder of $-4$. Once again, recall from elementary school that you can express $\frac{number}{divisor}$ as $\text{quotient} + \frac{\text{remainder}}{\text{divisor}}$.
For example $7 = 3 + \frac{1}{2}$. Hence, the integral can be rewritten as:

$$
\begin{align}
\int \frac{x - 5}{-2x + 2} dx &= \int \left(-\frac{1}{2} + \frac{-4}{-2x + 2}\right) dx \\
&= \int \left(-\frac{1}{2} + \frac{2}{x - 1}\right) dx \\
\end{align}
$$

The integral of $-\frac{1}{2}$ is $-\frac{x}{2}$, and the integral of $\frac{2}{x - 1}$ can be found using $u$-substitution:

$$
\begin{align}
u &= x - 1 \\
du &= dx \\
\int \frac{2}{x - 1} dx &= 2 \int \frac{1}{u} du = 2 \ln|u| + C = 2 \ln|x - 1| + C
\end{align}
$$

Therefore, the integral is:

$$
\int \frac{x - 5}{-2x + 2} dx = -\frac{x}{2} + 2 \ln|x - 1| + C
$$

## Integration by Completing the Square

Completing the square is a technique used to solve quadratic equations. It can also be used in integration.

For example, consider the following integral:

$$
\int \frac{1}{2x^2 + 8x + 12} dx
$$

The first step is to complete the square in the denominator. Recall that to complete the square, you need to find the value that makes the square a perfect square trinomial.

We will first need to remove the coefficient of $x^2$ by factoring out $\frac{1}{2}$:

$$
\int \frac{1}{2x^2 + 8x + 12} dx = \frac{1}{2} \int \frac{1}{x^2 + 4x + 6} dx
$$

Next, complete the square in the denominator.

$$
\frac{1}{2} \int \frac{1}{x^2 + 4x + 6} dx = \frac{1}{2} \int \frac{1}{x^2 + 4x + 4 + 2} dx = \frac{1}{2} \int \frac{1}{(x + 2)^2 + 2} dx
$$

Now, let's factor out the $2$ in the denominator:

$$
\frac{1}{2} \int \frac{1}{(x + 2)^2 + 2} dx = \frac{1}{4} \int \frac{1}{\left(\frac{x + 2}{\sqrt{2}}\right)^2 + 1} dx
$$

Now, let $u = \frac{x + 2}{\sqrt{2}}$:

$$
\begin{align}
u &= \frac{x + 2}{\sqrt{2}} \\
du &= \frac{1}{\sqrt{2}} dx \\
\sqrt{2} du &= dx
\end{align}
$$

We need to get the $\sqrt{2}dx$ to match $du$. Therefore, multiply the numerator by $\sqrt{2}$ and divide the fraction outside by $\sqrt{2}$:

$$
\frac{1}{4} \int \frac{1}{\left(\frac{x + 2}{\sqrt{2}}\right)^2 + 1} dx = \frac{1}{4 \sqrt{2}} \int \frac{\sqrt{2}}{\left(\frac{x + 2}{\sqrt{2}}\right)^2 + 1} dx = \frac{1}{4 \sqrt{2}} \int \frac{1}{u^2 + 1} du
$$

The integral of $\frac{1}{u^2 + 1}$ is $\arctan(u) + C$. Therefore, the integral is:

$$
\begin{align}
\frac{1}{4 \sqrt{2}} \int \frac{\sqrt{2}}{\left(\frac{x + 2}{\sqrt{2}}\right)^2 + 1} dx = \frac{1}{4 \sqrt{2}} \int \frac{1}{u^2 + 1} du = \frac{1}{4 \sqrt{2}} \arctan(u) + C = \frac{1}{4 \sqrt{2}} \arctan\left(\frac{x + 2}{\sqrt{2}}\right) + C
\end{align}
$$

## Integration by Parts

Integration by parts is a technique used to integrate the product of two functions.

Let's say we have $f(x)$ and $g(x)$ whose derivatives are $f'(x)$ and $g'(x)$ respectively. The product rule states that:

$$
\begin{equation}
\frac{d}{dx} f(x)g(x) = f'(x)g(x) + f(x)g'(x)
\end{equation}
$$

Integrating both sides with respect to $x$:

$$
\begin{equation}
f(x)g(x) = \int f'(x)g(x) dx + \int f(x)g'(x) dx
\end{equation}
$$

Rearranging the equation, we get:

$$
\begin{equation}
\int f(x)g'(x) dx = f(x)g(x) - \int f'(x)g(x) dx \label{eq:integration_by_parts}
\end{equation}
$$

This is the formula for integration by parts. The idea is to choose $f(x)$ and $g'(x)$ such that the integral on the right-hand side is easier to solve than the integral on the left-hand side.

### Example Problem: Integration by Parts - $x \cos(x)$

> Evaluate the following integral:
>
> $$
> \begin{equation}
> \int x \cos(x) dx \label{eq:example_problem_integration_by_parts_xcosx}
> \end{equation}
> $$

We have a product of $x$ and $\cos(x)$. Determining which is $f(x)$ and which is $g'(x)$ comes down to the right hand side, specifically $\int f'(x)g(x)dx$.

Therefore, we assign $f(x)$ such that $f'(x)$ is easy, and asssign $g'(x)$ such that $g(x)$ is easy.

Choose $f(x) = x$ because $f'(x) = 1$, and choose $g'(x) = \cos(x)$ because $g(x) = \sin(x)$.

Plugging into $\ref{eq:example_problem_integration_by_parts_xcosx}$ and using $\ref{eq:integration_by_parts}$:

$$
\begin{align}
\int \class{red}{\overbrace{x}^{f(x)}} \class{blue}{\underbrace{\cos(x)}_{g'(x)}} dx &= \class{red}{f(x)}\class{blue}{g(x)} - \int \class{red}{f'(x)}\class{blue}{g(x)} dx \\
&= \class{red}{x}\class{blue}{\sin(x)} - \int \class{blue}{\sin(x)} dx \\
&= \class{red}{x}\class{blue}{\sin(x)} + \class{blue}{\cos(x)} + C
\end{align}
$$

### Example Problem: Integration by Parts - $\ln(x)$

> Evaluate the following integral:
>
> $$
> \begin{equation}
> \int \ln(x) dx \label{eq:example_problem_integration_by_parts_lnx}
> \end{equation}
> $$

Integration by Parts works for products of two functions, but this is a singular function!

However, you can add another term simply by multiplying by $1$:

$$
\begin{equation}
\int \ln(x) dx = \int (\ln(x))\cdot 1 dx \label{eq:example_problem_integration_by_parts_lnx-mul1}
\end{equation}
$$

We assign $f(x)$ such that $f'(x)$ is easy, and asssign $g'(x)$ such that $g(x)$ is easy.

Choose $f(x) = \ln(x)$ because $f'(x) = 1/x$, and choose $g'(x) = 1$ because $g(x) = x$.

Plugging into $\ref{eq:example_problem_integration_by_parts_lnx-mul1}$ and using $\ref{eq:integration_by_parts}$:

$$
\begin{align}
\int \class{red}{\overbrace{\ln(x)}^{f(x)}} \class{blue}{\underbrace{(1)}_{g'(x)}} dx &= \class{red}{f(x)}\class{blue}{g(x)} - \int \class{red}{f'(x)}\class{blue}{g(x)} dx \\
&= \class{red}{\ln(x)}\class{blue}{x} - \int \class{red}{\frac{1}{x}}\class{blue}{x} dx \\
&= \class{red}{\ln(x)}\class{blue}{x} - x + C \\
&= x(\ln(x) - 1) + C
\end{align}
$$

### Example Problem: Integration by Parts - $x^2 e^x$

> Evaluate the following integral:
>
> $$
> \begin{equation}
> \int x^2 e^x dx \label{eq:example_problem_integration_by_parts_x2ex}
> \end{equation}
> $$

We shall first use Integration by Parts like before:

$$
\begin{align}
\int \class{red}{\overbrace{x^2}^{f(x)}} \class{blue}{\underbrace{e^x}_{g'(x)}} dx &= \class{red}{f(x)}\class{blue}{g(x)} - \int \class{red}{f'(x)}\class{blue}{g(x)} dx \\
&= \class{red}{x^2}\class{blue}{e^x} - \int \class{red}{2x}\class{blue}{e^x} dx \\
\end{align}
$$

The integral on the right can be solved using Integration by Parts again:

$$
\begin{align}
\int x^2 e^x dx &= \class{red}{x^2}\class{blue}{e^x} - 2\int \class{green}{\overbrace{x}^{u(x)}} \class{yellow}{\underbrace{e^x}_{v'(x)}} dx \\
&= \class{red}{x^2}\class{blue}{e^x} - 2\left(\class{green}{u(x)}\class{yellow}{v(x)} - \int \class{green}{u'(x)}\class{yellow}{v(x)} dx\right) \\
&= \class{red}{x^2}\class{blue}{e^x} - 2\left(\class{green}{x}\class{yellow}{e^x} - \int \class{green}{1}\class{yellow}{e^x} dx \right) \\
&= \class{red}{x^2}\class{blue}{e^x} - \class{green}{2x}\class{yellow}{e^x} + \class{yellow}{2e^x} + C \\
&= e^x(x^2 - 2x + 2) + C \\
\end{align}
$$
